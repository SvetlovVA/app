import{_ as d,d as n,S as s,U as c,V as r,Y as u,a2 as i,Z as a,a1 as l}from"./index.ace64889.js";import{Q as h}from"./QPage.ac72a775.js";const p=n({name:"GeoPage",isWatch:!1,watchId:null,wakeLock:null,data(){return{isWatch:this.isWatch,timestamp:0,latitude:0,longitude:0,accuracy:0,speed:0,altitude:0,altitude_accuracy:0}},methods:{async startGeolocation(){if("wakeLock"in navigator?this.wakeLock=await navigator.wakeLock.request("screen"):alert("Wake lock is not supported by this browser"),!this.isWatch&&navigator.geolocation){this.$q.loading.show(),this.isWatch=!0;let t={enableHighAccuracy:!0,timeout:3e3,maximumAge:0};this.watchId=navigator.geolocation.watchPosition(this.setPosition,this.errorPosition,t)}else alert("Get Navigator.geolocation is FALSE"),this.isWatch=!1,this.errorPosition()},stopGeolocation(){this.wakeLock!=null&&(this.wakeLock.release(),this.wakeLock=null),this.watchId!=null&&navigator.geolocation.clearWatch(this.watchId),this.timestamp=0,this.isWatch=!1,this.latitude=0,this.longitude=0,this.accuracy=0,this.speed=0,this.altitude=0,this.altitude_accuracy=0},setPosition(t){const e=t.coords;this.timestamp=t.timestamp,this.latitude=e.latitude>0?this.latitude=e.latitude.toFixed(7):this.latitude=0,this.longitude=e.longitude>0?this.longitude=e.longitude.toFixed(7):this.longitude=0,this.accuracy=t.coords.accuracy>0?this.accuracy=t.coords.accuracy.toFixed(2):this.accuracy=0,this.speed=t.coords.speed>0?this.speed=(t.coords.speed*3.6).toFixed(2):this.speed=0,this.altitude=e.altitude>0?this.altitude=e.altitude.toFixed(3):this.altitude=0,this.altitude_accuracy=e.altitude_accuracy>0?this.altitude=e.altitude_accuracy.toFixed(3):this.altitude_accuracy=0,this.$q.loading.hide()},errorPosition(t){this.stopGeolocation();const{code:e}=t;let o="\u043D\u0435 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u0430. \u041A\u043E\u0434: ";switch(e){case GeolocationPositionError.TIMEOUT:o="\u0432\u0440\u0435\u043C\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0433\u0435\u043E\u043B\u043E\u043A\u0430\u0446\u0438\u0438 \u0438\u0441\u0442\u0435\u043A\u043B\u043E";break;case GeolocationPositionError.PERMISSION_DENIED:o="\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0437\u0430\u043F\u0440\u0435\u0442\u0438\u043B \u0442\u0440\u0435\u043A\u0438\u043D\u0433 \u0441\u0432\u043E\u0435\u0439 \u0433\u0435\u043E\u043F\u043E\u0437\u0438\u0446\u0438\u0438";break;case GeolocationPositionError.POSITION_UNAVAILABLE:o="\u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043C\u0435\u0441\u0442\u043E\u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u043D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C";break;default:o+=e}this.$q.notify({position:"bottom",timeout:3e3,color:"negative",textColor:"white",actions:[{icon:"close",color:"white"}],message:`\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u043E\u0437\u0438\u0446\u0438\u044E! 
 \u041F\u0440\u0438\u0447\u0438\u043D\u0430: `+o}),this.$q.loading.hide()}}}),g={style:{"padding-top":"20px"}},m={class:"text-left"},k={class:"text-left"};function y(t,e,o,f,w,P){return s(),c(h,{style:{padding:"20px"}},{default:r(()=>[u(" \u0422\u0435\u0441\u0442\u043E\u0432\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 API watchPosition "),i("div",g,[i("div",m,[i("p",null," Timestamp: "+a(t.timestamp),1),i("p",null," Latitude (\u0448): "+a(t.latitude)+" \xB0 ",1),i("p",null," Longitude (\u0434): "+a(t.longitude)+" \xB0 ",1),i("p",null," Accuracy (\u0422\u043E\u0447\u043D\u043E\u0441\u0442\u044C): "+a(t.accuracy)+" \u043C ",1),i("p",null," Speed: "+a(t.speed)+" \u043A\u043C/\u0447 ",1),i("p",null," Altitude (\u0412\u044B\u0441\u043E\u0442\u0430): "+a(t.altitude)+" \u043C ",1),i("p",null," Altitude Accuracy (\u0422\u043E\u0447\u043D\u043E\u0441\u0442\u044C \u0432\u044B\u0441\u043E\u0442\u044B): "+a(t.altitude_accuracy)+" \u043C ",1)])]),i("div",k,[t.isWatch?(s(),c(l,{key:1,color:"indigo",label:"\u0421\u0442\u043E\u043F",style:{"margin-left":"30px"},push:"",onClick:t.stopGeolocation},null,8,["onClick"])):(s(),c(l,{key:0,color:"indigo",label:"\u0421\u0442\u0430\u0440\u0442",push:"",onClick:t.startGeolocation},null,8,["onClick"]))])]),_:1})}var L=d(p,[["render",y]]);export{L as default};
